{"version":3,"sources":["file:///Users/abhishekrawat/tiledMap2/assets/Script/PlayerMovement.ts"],"names":["_decorator","Component","Node","ccclass","property","PlayerMovement","type","start","touchEventsFunc","joyStickBall","on","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","TOUCH_END","touchEnd","TOUCH_CANCEL","e","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;;;;;;;;OAC1B;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;gCAGjBK,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEJ;AAAR,OAAD,C,UAERE,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEJ;AAAR,OAAD,C,2BAJb,MACaG,cADb,SACoCJ,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAK1CM,QAAAA,KAAK,GAAG;AACJ,eAAKC,eAAL;AACH;;AACDA,QAAAA,eAAe,GAAG;AACd,eAAKC,YAAL,CAAkBC,EAAlB,CAAqBR,IAAI,CAACS,SAAL,CAAeC,WAApC,EAAiD,KAAKC,UAAtD,EAAkE,IAAlE;AACA,eAAKJ,YAAL,CAAkBC,EAAlB,CAAqBR,IAAI,CAACS,SAAL,CAAeG,UAApC,EAAgD,KAAKC,SAArD,EAAgE,IAAhE;AACA,eAAKN,YAAL,CAAkBC,EAAlB,CAAqBR,IAAI,CAACS,SAAL,CAAeK,SAApC,EAA+C,KAAKC,QAApD,EAA8D,IAA9D;AACA,eAAKR,YAAL,CAAkBC,EAAlB,CAAqBR,IAAI,CAACS,SAAL,CAAeO,YAApC,EAAkD,KAAKD,QAAvD,EAAiE,IAAjE;AACH;;AACDA,QAAAA,QAAQ,GAAG,CACP;AACA;AACA;AACH;;AACDJ,QAAAA,UAAU,GAAG,CACT;AACA;AACH;;AACDE,QAAAA,SAAS,CAACI,CAAD,EAAI,CACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AAnDc,O;;;;;iBAEzB,I;;;;;;;iBAEI,I","sourcesContent":["import { _decorator, Component, Node, UITransform } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"PlayerMovement\")\nexport class PlayerMovement extends Component {\n    @property({ type: Node })\n    joystick: Node = null;\n    @property({ type: Node })\n    joyStickBall: Node = null;\n    start() {\n        this.touchEventsFunc();\n    }\n    touchEventsFunc() {\n        this.joyStickBall.on(Node.EventType.TOUCH_START, this.touchStart, this);\n        this.joyStickBall.on(Node.EventType.TOUCH_MOVE, this.touchMove, this);\n        this.joyStickBall.on(Node.EventType.TOUCH_END, this.touchEnd, this);\n        this.joyStickBall.on(Node.EventType.TOUCH_CANCEL, this.touchEnd, this);\n    }\n    touchEnd() {\n        // this.stopPlayer = false;\n        // console.log(\"end\");\n        // this.joyStickBall.setPosition(0, 0, 0);\n    }\n    touchStart() {\n        // this.joyStickBall.setPosition(0, 0, 0);\n        // console.log(\"start\");\n    }\n    touchMove(e) {\n        // this.stopPlayer = true;\n        // this.intialPos = this.joyStickBall.parent\n        //     .getComponent(UITransform)\n        //     .convertToNodeSpaceAR(new Vec3(e.getUILocation().x, e.getUILocation().y, e.getUILocation().z));\n        // var initialPosPlayer = this.intialPos;\n        // var len = this.intialPos.length();\n        // console.log(\"len\", len);\n        // var joyStickBallBaseWidth = this.joyStickBall.parent.getComponent(UITransform).getBoundingBox().width / 2;\n        // if (len > joyStickBallBaseWidth) {\n        //     // this.finalPosBall.x = (this.intialPos.x * joyStickBallBaseWidth) / len;\n        //     // this.finalPosBall.y = (this.intialPos.y * joyStickBallBaseWidth) / len;\n        //     this.intialPos.x = (this.intialPos.x * joyStickBallBaseWidth) / len;\n        //     this.intialPos.y = (this.intialPos.y * joyStickBallBaseWidth) / len;\n        // }\n        // // if (len < joyStickBallBaseWidth) {\n        // //     this.intialPos = this.joyStickBall.parent\n        // //         .getComponent(UITransform)\n        // //         .convertToNodeSpaceAR(new Vec3(e.getUILocation().x, e.getUILocation().y, e.getUILocation().z));\n        // // }\n        // var dy = this.intialPos.y - initialPosPlayer.y;\n        // var dx = this.intialPos.x - initialPosPlayer.x;\n        // var angleRad = Math.atan2(dy, dx);\n        // var angleDeg = (angleRad * 180) / Math.PI;\n        // // console.log(\"angle\", angleDeg, \" rotation \", this.player.rotation);\n        // this.joyStickBall.setPosition(this.intialPos);\n    }\n\n    update(deltaTime: number) {}\n}\n"]}